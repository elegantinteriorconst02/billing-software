<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Billing / Quotation</title>

<link rel="stylesheet" href="assets/menu.css">

<style>
body{font-family:Arial;padding:20px}
h2{margin-bottom:6px}
hr{margin:12px 0}
table{border-collapse:collapse;width:100%}

/* ===== PRINT MODE FIX ===== */
#printTitle{display:none;}

@media print {
  #printTitle{
    display:block;
    text-align:center;
    font-size:18px;
    margin-bottom:10px;
    font-weight:bold;
  }
  .actions,.controls,#settingsBox,button{display:none!important;}
  table{font-size:12px}
  #companyHeader{text-align:center}
}

th,td{border:1px solid #888;padding:6px;font-size:13px;vertical-align:top}
th{background:#eee;text-align:center}

input,select,textarea{
  box-sizing:border-box;
  font-size:13px;
  border:1px solid #999;
  padding:4px;
}

textarea{resize:none;overflow:hidden;min-height:26px}
.auto-width{min-width:60px}
.size input{width:150px}
.hsn input{width:100px;text-align:center}
.uom input{width:50px}
.rate{width:100px}
.qty,.discPct{width:70px}
.taxable,.net{text-align:right;min-width:90px}
.hide{display:none}

.flex{display:flex;gap:10px;flex-wrap:wrap}
.block{border:1px solid #aaa;padding:8px;min-width:280px;flex:1}
.actions button{margin-right:10px}

/* SL */
.sl{width:40px;text-align:center;font-weight:bold}
</style>

<script>
if(!localStorage.getItem("user")){
  location.href="login.html";
}
</script>
</head>

<body>

<!-- ===== MENU ===== -->
<div id="menuContainer"></div>

<!-- ===== MAIN CONTENT ===== -->
<div class="main">

<h2 id="printTitle">Billing / Quotation</h2>

<div id="companyHeader" style="text-align:center;margin-bottom:15px">
  <img id="logoImg" style="max-height:140px;display:block;margin:auto">
  <h2 id="companyName"></h2>
  <div id="companyAddr"></div>
  <div id="companyContact"></div>
  <div id="companyTax"></div>
</div>

<!-- DOCUMENT INFO -->
<div class="flex">
  <div><b>Document Type:</b>
    <select id="docType">
      <option>TAX-INVOICE</option>
      <option>Quotation</option>
      <option>Proforma Invoice</option>
    </select>
  </div>

  <div><b>No:</b> <input id="docNo" class="auto-width"></div>
  <div><b>Date:</b> <input type="date" id="docDate"></div>

  <div><b>Tax Type:</b>
    <select id="taxType">
      <option value="intra">CGST + SGST</option>
      <option value="inter">IGST</option>
    </select>
  </div>
</div>

<hr>

<!-- BILL / SHIP -->
<div class="flex">
  <div class="block">
    <b>Bill To</b><br>
    <input list="clientList" id="billName" placeholder="Client Name"><br>
    <textarea id="billAddr" placeholder="Address"></textarea><br>
    <input id="billMob" placeholder="Mobile"><br>
    <input id="billEmail" placeholder="Email"><br>
    <input id="billGst" placeholder="GSTIN">
  </div>

  <div class="block">
    <b>Ship To</b><br>
    <input id="shipName"><br>
    <textarea id="shipAddr"></textarea>
  </div>
</div>

<hr>

<!-- ITEMS -->
<table>
<thead>
<tr>
  <th>SL</th><th>Description</th><th>Qty</th>
  <th>Rate</th><th>GST%</th><th>Net</th><th>X</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>

<br>
<button onclick="addRow()">+ Add Row</button>

<!-- SUMMARY -->
<div class="summary">
Taxable: â‚¹ <span id="tTax">0.00</span><br>
CGST: â‚¹ <span id="tCgst">0.00</span><br>
SGST: â‚¹ <span id="tSgst">0.00</span><br>
IGST: â‚¹ <span id="tIgst">0.00</span><br>
<b>Grand Total: â‚¹ <span id="grand">0.00</span></b><br>
<b>In Words:</b> <span id="inWords"></span>
</div>

<hr>

<div class="actions">
  <button onclick="openPrint()">ðŸ–¨ Print</button>
</div>

</div>
<!-- ===== END MAIN ===== -->

<!-- ===== DATA SCRIPTS ===== -->
<script src="data/storage.js"></script>
<script src="data/bills.js"></script>

<!-- ===== MENU ===== -->
<script src="shared/menu.js"></script>
<script>
fetch("shared/menu.html")
  .then(r=>r.text())
  .then(html=>{
    document.getElementById("menuContainer").innerHTML = html;
    initMenu();
  });
</script>

</body>
</html>
