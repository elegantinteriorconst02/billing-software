<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Settings</title>

<link rel="stylesheet" href="assets/menu.css">

<style>
:root{
  --primary:#4f46e5;
  --secondary:#22c55e;
  --bg:#f4f6fb;
  --card:#ffffff;
}

body{
  margin:0;
  font-family:Segoe UI,Arial;
  background:var(--bg);
}

.container{
  max-width:1200px;
  margin:auto;
  padding:25px;
}

h2{
  margin-bottom:15px;
  color:#111;
}

/* ===== TABS ===== */
.tabs{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-bottom:20px;
}
.tabs button{
  border:none;
  padding:10px 16px;
  border-radius:10px;
  background:#e5e7eb;
  cursor:pointer;
  font-weight:600;
}
.tabs button.active{
  background:linear-gradient(135deg,var(--primary),#6366f1);
  color:#fff;
}

/* ===== CARD ===== */
.section{display:none;}
.section.active{display:block;}

.card{
  background:var(--card);
  border-radius:14px;
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,.08);
  margin-bottom:20px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:15px;
}

input,textarea,select{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:14px;
}

textarea{resize:vertical}

label{
  font-size:13px;
  font-weight:600;
  margin-bottom:4px;
  display:block;
}

.saveBtn{
  background:linear-gradient(135deg,var(--secondary),#16a34a);
  color:#fff;
  border:none;
  padding:12px 20px;
  border-radius:10px;
  font-size:15px;
  cursor:pointer;
}

.themeBox{
  padding:15px;
  border-radius:12px;
  background:#eef2ff;
}
.themeOption{
  padding:8px 12px;
  border-radius:8px;
  background:#fff;
  margin-bottom:8px;
}
</style>
</head>

<body>

<!-- ===== MENU ===== -->
<div id="menuContainer"></div>

<!-- ===== MAIN CONTENT ===== -->
<div class="main">

  <div class="container">

    <h2>‚öô Settings</h2>

    <!-- TABS -->
    <div class="tabs">
      <button class="active" data-tab="company">üè¢ Company</button>
      <button data-tab="billing">üßæ Billing</button>
      <button data-tab="series">üî¢ Series</button>
      <button data-tab="theme">üé® Theme</button>
    </div>

    <!-- COMPANY -->
    <div id="company" class="section active card">
      <h3>Company Details</h3>

      <div class="grid">
        <div><label>Company Name</label><input id="sCompany"></div>
        <div><label>GSTIN</label><input id="sGst"></div>
        <div><label>PAN</label><input id="sPan"></div>
        <div><label>CIN</label><input id="sCin"></div>
        <div><label>Phone</label><input id="sPhone"></div>
        <div><label>Email</label><input id="sEmail"></div>
      </div>

      <label>Address</label>
      <textarea id="sAddress"></textarea>

      <label>Terms & Conditions</label>
      <textarea id="sTerms"></textarea>

      <label>Note</label>
      <textarea id="sNote"></textarea>

      <div class="grid">
        <div><label>Logo</label><input type="file" id="sLogo"></div>
        <div><label>Stamp</label><input type="file" id="sStamp"></div>
        <div><label>Signature</label><input type="file" id="sSign"></div>
      </div>

      <br>
      <button class="saveBtn" id="saveCompanyBtn">üíæ Save Company</button>
    </div>

    <!-- BILLING -->
    <div id="billing" class="section card">
      <h3>Billing Preferences</h3>

      <label>
        <input type="checkbox" id="autoDate" checked>
        Auto current Indian Date
      </label>

      <label>
        <input type="checkbox" id="autoClientSave" checked>
        Auto save client from billing
      </label>

      <br><br>
      <button class="saveBtn" id="saveBillingBtn">üíæ Save Billing Settings</button>
    </div>

    <!-- SERIES -->
    <div id="series" class="section card">
      <h3>Document Number Series</h3>

      <div class="grid">
        <div>
          <label>Invoice Series</label>
          <input id="invSeries">
        </div>
        <div>
          <label>Invoice Start No</label>
          <input id="invStart" type="number">
        </div>

        <div>
          <label>Quotation Series</label>
          <input id="qtSeries">
        </div>
        <div>
          <label>Quotation Start No</label>
          <input id="qtStart" type="number">
        </div>
      </div>

      <br>
      <button class="saveBtn" id="saveSeriesBtn">üíæ Save Series</button>
    </div>

    <!-- THEME -->
    <div id="theme" class="section card">
      <h3>Invoice Theme</h3>

      <div class="themeBox">
        <div class="themeOption">
          <input type="radio" name="theme" checked> Modern Blue
        </div>
        <div class="themeOption">
          <input type="radio" name="theme"> Minimal Black
        </div>
        <div class="themeOption">
          <input type="radio" name="theme"> Classic GST
        </div>
      </div>

      <br>
      <button class="saveBtn">Apply Theme</button>
    </div>

  </div>
</div>

<!-- ===== MENU SCRIPT ===== -->
<script src="shared/menu.js"></script>
<script>
fetch("shared/menu.html")
  .then(r=>r.text())
  .then(html=>{
    document.getElementById("menuContainer").innerHTML = html;
    initMenu();
  });

/* ===== TAB HANDLER ===== */
document.querySelectorAll(".tabs button").forEach(btn=>{
  btn.addEventListener("click",()=>{
    document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
    document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));

    btn.classList.add("active");
    document.getElementById(btn.dataset.tab).classList.add("active");
  });
});

/* ===== STORAGE ===== */
function saveCompany(){
  localStorage.setItem("company",JSON.stringify({
    name:sCompany.value,
    addr:sAddress.value,
    phone:sPhone.value,
    email:sEmail.value,
    gst:sGst.value,
    pan:sPan.value,
    cin:sCin.value,
    terms:sTerms.value,
    note:sNote.value
  }));
  saveFile("sLogo","logo");
  saveFile("sStamp","stamp");
  saveFile("sSign","sign");
  alert("Company Saved");
}

function saveBilling(){
  localStorage.setItem("billingSettings",JSON.stringify({
    autoDate:autoDate.checked,
    autoClient:autoClientSave.checked
  }));
  alert("Billing Settings Saved");
}

function saveSeries(){
  localStorage.setItem("docSeries",JSON.stringify({
    inv:{s:invSeries.value,n:+invStart.value||1},
    qt:{s:qtSeries.value,n:+qtStart.value||1}
  }));
  alert("Series Saved");
}

function loadData(){
  const c=JSON.parse(localStorage.getItem("company")||"{}");
  sCompany.value=c.name||"";
  sAddress.value=c.addr||"";
  sPhone.value=c.phone||"";
  sEmail.value=c.email||"";
  sGst.value=c.gst||"";
  sPan.value=c.pan||"";
  sCin.value=c.cin||"";
  sTerms.value=c.terms||"";
  sNote.value=c.note||"";

  const s=JSON.parse(localStorage.getItem("docSeries")||"{}");
  invSeries.value=s.inv?.s||"";
  invStart.value=s.inv?.n||1;
  qtSeries.value=s.qt?.s||"";
  qtStart.value=s.qt?.n||1;
}

function saveFile(id,key){
  const f=document.getElementById(id).files[0];
  if(!f)return;
  const r=new FileReader();
  r.onload=()=>localStorage.setItem(key,r.result);
  r.readAsDataURL(f);
}

/* Bind buttons */
saveCompanyBtn.onclick=saveCompany;
saveBillingBtn.onclick=saveBilling;
saveSeriesBtn.onclick=saveSeries;

loadData();
</script>

</body>
</html>
