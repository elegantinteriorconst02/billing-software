<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Projects</title>
<link rel="stylesheet" href="../assets/menu.css">
<style>
.main{padding:20px}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #ccc;padding:8px}
</style>
</head>
<body>

<div id="menuContainer"></div>

<div class="main">
<h2>üìÅ Projects</h2>

<input id="pName" placeholder="Project name">
<input id="pClient" placeholder="Client name">
<button onclick="addProject()">‚ûï Add</button>

<table>
<thead>
<tr><th>Name</th><th>Client</th><th>Status</th><th></th></tr>
</thead>
<tbody id="rows"></tbody>
</table>
</div>

<script src="data/projects.store.js"></script>
<script src="project.js"></script>

<script>
function render(){
  rows.innerHTML="";
  getAllProjects().forEach(p=>{
    rows.innerHTML+=`
      <tr>
        <td>${p.name}</td>
        <td>${p.client||"-"}</td>
        <td>${p.status}</td>
        <td><button onclick="openP('${p.id}')">View</button></td>
      </tr>`;
  });
}

function addProject(){
  if(!pName.value) return alert("Name required");
  createProject({name:pName.value, client:pClient.value});
  pName.value=""; pClient.value="";
  render();
}

function openP(id){
  location.href="project-view.html?id="+id;
}

render();
</script>

<script src="../shared/menu.js"></script>
<script>
fetch("../shared/menu.html").then(r=>r.text()).then(h=>{
  menuContainer.innerHTML=h;initMenu();
});
</script>

</body>
</html>
