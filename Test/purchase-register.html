<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Purchase Register</title>
<link rel="stylesheet" href="assets/menu.css">

<style>
body{font-family:Arial;padding:20px;background:#f4f6fb}
table{width:100%;border-collapse:collapse;background:#fff}
th,td{padding:8px;border-bottom:1px solid #ddd;font-size:14px}
th{background:#eef1f8}
</style>
</head>

<body>
<div id="menuContainer"></div>

<h2>ðŸ§¾ Purchase Register</h2>

<table>
<thead>
<tr>
  <th>Date</th>
  <th>Vendor</th>
  <th>Bill No</th>
  <th>Attachments</th>
  <th>Total</th>
</tr>
</thead>
<tbody id="purchaseBody"></tbody>
</table>

<script src="data/storage.js"></script>
<script src="data/purchase.js"></script>

<script>
function renderPurchases(){
  const list = Storage.get("purchases");
  const tbody = document.getElementById("purchaseBody");
  tbody.innerHTML = "";

  list.forEach(p=>{
    tbody.innerHTML += `
      <tr>
        <td>${p.date || ""}</td>
        <td>${p.vendorName || ""}</td>
        <td>${p.billNo || ""}</td>

        <!-- âœ… EXACT à¦œà¦¾à§Ÿà¦—à¦¾: attachment -->
        <td>
          ${(p.attachments || []).map((f,i)=>`
            <a href="${f.data}" target="_blank">ðŸ“Ž ${i+1}</a>
          `).join("<br>")}
        </td>

        <td>â‚¹ ${p.total || 0}</td>
      </tr>
    `;
  });
}

renderPurchases();
</script>

<script src="shared/menu.js"></script>
<script>
fetch("shared/menu.html")
  .then(r=>r.text())
  .then(html=>{
    document.getElementById("menuContainer").innerHTML = html;
    initMenu();
  });
</script>

</body>
</html>
